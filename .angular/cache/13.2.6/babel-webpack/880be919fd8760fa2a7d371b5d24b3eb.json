{"ast":null,"code":"import _asyncToGenerator from \"/home/kim/Documentos/PIFront/AdopcionAnimales/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl, Validators } from '@angular/forms';\nimport { CommentDTO } from '../DTO/CommentDTO';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/platform-browser\";\nimport * as i2 from \"../services/post.service\";\nimport * as i3 from \"../services/comment.service\";\nimport * as i4 from \"../services/authentication.service\";\nimport * as i5 from \"../services/image.service\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/common\";\n\nfunction PostComponent_div_1_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12);\n    i0.ɵɵelement(2, \"img\", 13);\n    i0.ɵɵelementStart(3, \"form\", 14);\n    i0.ɵɵlistener(\"ngSubmit\", function PostComponent_div_1_div_15_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const post_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.enviar(post_r1.id);\n    });\n    i0.ɵɵelement(4, \"input\", 15);\n    i0.ɵɵelementStart(5, \"button\", 16);\n    i0.ɵɵtext(6, \"Submit\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.imagenUsu, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.commentForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.commentForm.invalid);\n  }\n}\n\nfunction PostComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4);\n    i0.ɵɵelement(3, \"img\", 5);\n    i0.ɵɵelementStart(4, \"b\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 6)(7, \"h5\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"img\", 7);\n    i0.ɵɵelementStart(12, \"h6\", 8)(13, \"a\", 9);\n    i0.ɵɵtext(14, \"Comments\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(15, PostComponent_div_1_div_15_Template, 7, 3, \"div\", 10);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const post_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"../../assets/\", post_r1.nombreUsuario.foto, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r1.nombreUsuario.nombreUsuario);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(post_r1.cabecera);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r1.contenido);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"../../assets/\", post_r1.foto, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/comments/\", post_r1.id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0._authService.isAuth() && ctx_r0._authService.isAdmin() == false);\n  }\n}\n\nexport class PostComponent {\n  constructor(_sanitizer, _postService, _commentService, _authService, _imageService, fb) {\n    this._sanitizer = _sanitizer;\n    this._postService = _postService;\n    this._commentService = _commentService;\n    this._authService = _authService;\n    this._imageService = _imageService;\n    this.fb = fb;\n    this.posts = [];\n  }\n\n  ngOnInit() {\n    this.obtenerUsuarios();\n    this.getImagen();\n    this.commentForm = this.fb.group({\n      comment: new FormControl('', [Validators.required])\n    });\n  }\n\n  obtenerUsuarios() {\n    this._postService.obtener().subscribe(data => {\n      return this.posts = data;\n    });\n  }\n\n  enviar(id) {\n    this._commentService.add(new CommentDTO(this.commentForm.value.comment, id, sessionStorage.getItem(\"nombreUsuario\") || \"\")).subscribe(data => {\n      return this.commentData = data;\n    });\n  }\n\n  getImagen() {\n    var _this = this;\n\n    this._imageService.viewImage().subscribe(res => {\n      const reader = new FileReader();\n      this.imagenUsu = new String();\n\n      reader.onload = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (e) {\n          _this.imagenUsu = e.target.result;\n          reader.readAsDataURL(new Blob([res]));\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      /*let objectURL = 'data:image/png;base64,' + res;\n      this.imagenUsu = this._sanitizer.bypassSecurityTrustUrl(objectURL);*/\n\n    });\n  }\n\n}\n\nPostComponent.ɵfac = function PostComponent_Factory(t) {\n  return new (t || PostComponent)(i0.ɵɵdirectiveInject(i1.DomSanitizer), i0.ɵɵdirectiveInject(i2.PostService), i0.ɵɵdirectiveInject(i3.CommentService), i0.ɵɵdirectiveInject(i4.AuthenticationService), i0.ɵɵdirectiveInject(i5.ImageService), i0.ɵɵdirectiveInject(i6.FormBuilder));\n};\n\nPostComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PostComponent,\n  selectors: [[\"app-post\"]],\n  decls: 2,\n  vars: 1,\n  consts: [[1, \"container\", \"px-5\"], [\"class\", \"container col-6 py-5\", 4, \"ngFor\", \"ngForOf\"], [1, \"container\", \"col-6\", \"py-5\"], [1, \"row\", \"py-3\"], [1, \"col\"], [\"width\", \"60px\", \"height\", \"60px\", 1, \"rounded-circle\", \"mx-3\", 3, \"src\"], [1, \"row\", \"border\", \"border-secondary\", \"py-3\"], [1, \"px-5\", 3, \"src\"], [1, \"py-3\", \"px-5\"], [3, \"href\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-9\", \"d-flex\", \"justify-content-center\"], [\"width\", \"50px\", \"height\", \"50px\", 1, \"rounded-circle\", \"mx-3\", 3, \"src\"], [1, \"my-2\", \"d-flex\", \"justify-content-center\", 3, \"formGroup\", \"ngSubmit\"], [\"formControlName\", \"comment\", \"type\", \"text\", 1, \"form-control\", \"w-50\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\"]],\n  template: function PostComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, PostComponent_div_1_Template, 16, 7, \"div\", 1);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.posts);\n    }\n  },\n  directives: [i7.NgForOf, i7.NgIf, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.DefaultValueAccessor, i6.NgControlStatus, i6.FormControlName],\n  styles: [\".container[_ngcontent-%COMP%]{\\n    background-color: rgba(250, 235, 215, 0.781);\\n    width: 65%;\\n    background: linear-gradient(\\\"\\\");\\n}\\n\\na[_ngcontent-%COMP%]{\\n    color: black !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLDRDQUE0QztJQUM1QyxVQUFVO0lBQ1YsK0JBQStCO0FBQ25DOztBQUVBO0lBQ0ksdUJBQXVCO0FBQzNCIiwiZmlsZSI6InBvc3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXJ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTAsIDIzNSwgMjE1LCAwLjc4MSk7XG4gICAgd2lkdGg6IDY1JTtcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXCJcIik7XG59XG5cbmF7XG4gICAgY29sb3I6IGJsYWNrICFpbXBvcnRhbnQ7XG59Il19 */\"]\n});","map":{"version":3,"sources":["/home/kim/Documentos/PIFront/AdopcionAnimales/src/app/post/post.component.ts"],"names":["FormControl","Validators","CommentDTO","i0","i1","i2","i3","i4","i5","i6","i7","PostComponent_div_1_div_15_Template","rf","ctx","_r5","ɵɵgetCurrentView","ɵɵelementStart","ɵɵelement","ɵɵlistener","PostComponent_div_1_div_15_Template_form_ngSubmit_3_listener","ɵɵrestoreView","post_r1","ɵɵnextContext","$implicit","ctx_r3","enviar","id","ɵɵtext","ɵɵelementEnd","ctx_r2","ɵɵadvance","ɵɵproperty","imagenUsu","ɵɵsanitizeUrl","commentForm","invalid","PostComponent_div_1_Template","ɵɵtemplate","ctx_r0","ɵɵpropertyInterpolate1","nombreUsuario","foto","ɵɵtextInterpolate","cabecera","contenido","_authService","isAuth","isAdmin","PostComponent","constructor","_sanitizer","_postService","_commentService","_imageService","fb","posts","ngOnInit","obtenerUsuarios","getImagen","group","comment","required","obtener","subscribe","data","add","value","sessionStorage","getItem","commentData","viewImage","res","reader","FileReader","String","onload","e","target","result","readAsDataURL","Blob","ɵfac","PostComponent_Factory","t","ɵɵdirectiveInject","DomSanitizer","PostService","CommentService","AuthenticationService","ImageService","FormBuilder","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","PostComponent_Template","directives","NgForOf","NgIf","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","DefaultValueAccessor","NgControlStatus","FormControlName","styles"],"mappings":"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","sourcesContent":["import { FormControl, Validators } from '@angular/forms';\nimport { CommentDTO } from '../DTO/CommentDTO';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/platform-browser\";\nimport * as i2 from \"../services/post.service\";\nimport * as i3 from \"../services/comment.service\";\nimport * as i4 from \"../services/authentication.service\";\nimport * as i5 from \"../services/image.service\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/common\";\nfunction PostComponent_div_1_div_15_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12);\n    i0.ɵɵelement(2, \"img\", 13);\n    i0.ɵɵelementStart(3, \"form\", 14);\n    i0.ɵɵlistener(\"ngSubmit\", function PostComponent_div_1_div_15_Template_form_ngSubmit_3_listener() { i0.ɵɵrestoreView(_r5); const post_r1 = i0.ɵɵnextContext().$implicit; const ctx_r3 = i0.ɵɵnextContext(); return ctx_r3.enviar(post_r1.id); });\n    i0.ɵɵelement(4, \"input\", 15);\n    i0.ɵɵelementStart(5, \"button\", 16);\n    i0.ɵɵtext(6, \"Submit\");\n    i0.ɵɵelementEnd()()()();\n} if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.imagenUsu, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.commentForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.commentForm.invalid);\n} }\nfunction PostComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4);\n    i0.ɵɵelement(3, \"img\", 5);\n    i0.ɵɵelementStart(4, \"b\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 6)(7, \"h5\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"img\", 7);\n    i0.ɵɵelementStart(12, \"h6\", 8)(13, \"a\", 9);\n    i0.ɵɵtext(14, \"Comments\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(15, PostComponent_div_1_div_15_Template, 7, 3, \"div\", 10);\n    i0.ɵɵelementEnd()();\n} if (rf & 2) {\n    const post_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"../../assets/\", post_r1.nombreUsuario.foto, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r1.nombreUsuario.nombreUsuario);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(post_r1.cabecera);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r1.contenido);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"../../assets/\", post_r1.foto, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/comments/\", post_r1.id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0._authService.isAuth() && ctx_r0._authService.isAdmin() == false);\n} }\nexport class PostComponent {\n    constructor(_sanitizer, _postService, _commentService, _authService, _imageService, fb) {\n        this._sanitizer = _sanitizer;\n        this._postService = _postService;\n        this._commentService = _commentService;\n        this._authService = _authService;\n        this._imageService = _imageService;\n        this.fb = fb;\n        this.posts = [];\n    }\n    ngOnInit() {\n        this.obtenerUsuarios();\n        this.getImagen();\n        this.commentForm = this.fb.group({\n            comment: new FormControl('', [Validators.required])\n        });\n    }\n    obtenerUsuarios() {\n        this._postService.obtener().subscribe(data => {\n            return this.posts = data;\n        });\n    }\n    enviar(id) {\n        this._commentService.add(new CommentDTO(this.commentForm.value.comment, id, sessionStorage.getItem(\"nombreUsuario\") || \"\")).subscribe(data => {\n            return this.commentData = data;\n        });\n    }\n    getImagen() {\n        this._imageService.viewImage().subscribe(res => {\n            const reader = new FileReader();\n            this.imagenUsu = new String();\n            reader.onload = async (e) => {\n                this.imagenUsu = e.target.result;\n                reader.readAsDataURL(new Blob([res]));\n            };\n            /*let objectURL = 'data:image/png;base64,' + res;\n            this.imagenUsu = this._sanitizer.bypassSecurityTrustUrl(objectURL);*/\n        });\n    }\n}\nPostComponent.ɵfac = function PostComponent_Factory(t) { return new (t || PostComponent)(i0.ɵɵdirectiveInject(i1.DomSanitizer), i0.ɵɵdirectiveInject(i2.PostService), i0.ɵɵdirectiveInject(i3.CommentService), i0.ɵɵdirectiveInject(i4.AuthenticationService), i0.ɵɵdirectiveInject(i5.ImageService), i0.ɵɵdirectiveInject(i6.FormBuilder)); };\nPostComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PostComponent, selectors: [[\"app-post\"]], decls: 2, vars: 1, consts: [[1, \"container\", \"px-5\"], [\"class\", \"container col-6 py-5\", 4, \"ngFor\", \"ngForOf\"], [1, \"container\", \"col-6\", \"py-5\"], [1, \"row\", \"py-3\"], [1, \"col\"], [\"width\", \"60px\", \"height\", \"60px\", 1, \"rounded-circle\", \"mx-3\", 3, \"src\"], [1, \"row\", \"border\", \"border-secondary\", \"py-3\"], [1, \"px-5\", 3, \"src\"], [1, \"py-3\", \"px-5\"], [3, \"href\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-9\", \"d-flex\", \"justify-content-center\"], [\"width\", \"50px\", \"height\", \"50px\", 1, \"rounded-circle\", \"mx-3\", 3, \"src\"], [1, \"my-2\", \"d-flex\", \"justify-content-center\", 3, \"formGroup\", \"ngSubmit\"], [\"formControlName\", \"comment\", \"type\", \"text\", 1, \"form-control\", \"w-50\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\"]], template: function PostComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, PostComponent_div_1_Template, 16, 7, \"div\", 1);\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.posts);\n    } }, directives: [i7.NgForOf, i7.NgIf, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.DefaultValueAccessor, i6.NgControlStatus, i6.FormControlName], styles: [\".container[_ngcontent-%COMP%]{\\n    background-color: rgba(250, 235, 215, 0.781);\\n    width: 65%;\\n    background: linear-gradient(\\\"\\\");\\n}\\n\\na[_ngcontent-%COMP%]{\\n    color: black !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLDRDQUE0QztJQUM1QyxVQUFVO0lBQ1YsK0JBQStCO0FBQ25DOztBQUVBO0lBQ0ksdUJBQXVCO0FBQzNCIiwiZmlsZSI6InBvc3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXJ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTAsIDIzNSwgMjE1LCAwLjc4MSk7XG4gICAgd2lkdGg6IDY1JTtcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXCJcIik7XG59XG5cbmF7XG4gICAgY29sb3I6IGJsYWNrICFpbXBvcnRhbnQ7XG59Il19 */\"] });\n"]},"metadata":{},"sourceType":"module"}